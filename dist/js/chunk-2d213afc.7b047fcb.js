(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d213afc"],{ae79:function(e,a,t){"use strict";t.r(a);var i,n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-app",{attrs:{id:"inspire"}},[t("v-main",[t("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[t("v-row",{attrs:{align:"center",justify:"center"}},[t("DomainList")],1)],1)],1)],1)},o=[],s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.domains,"sort-by":"user"},on:{"click:row":e.rowClicked},scopedSlots:e._u([{key:"top",fn:function(){return[t("v-toolbar",{attrs:{flat:""}},[t("v-toolbar-title",[e._v("Domains")]),t("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t("v-spacer"),t("v-dialog",{attrs:{width:"500",color:"primary"},model:{value:e.domainDialogShow,callback:function(a){e.domainDialogShow=a},expression:"domainDialogShow"}},[t("v-card",[t("v-card-title",[e._v(" "+e._s(e.domainDialog.placeName)+" ")]),t("v-card-text",{staticClass:"text-left"},[t("v-list",{staticClass:"transparent"},[t("v-list-item",[t("v-list-item-title",[e._v(" Domain ID ")]),t("v-list-item-subtitle",{staticClass:"text-right"},[e._v(" "+e._s(e.domainDialog.domainID)+" ")])],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(a){var i=a.item;return[t("v-icon",{attrs:{small:"",disabled:!e.$store.state.account.useAsAdmin},on:{click:function(a){return e.deleteDomain(i.domainID,i.placeName)}}},[e._v(" mdi-nuke ")])]}},{key:"item.images",fn:function(e){var a=e.item;return[t("v-avatar",[t("img",{attrs:{src:a.images.thumbnail}})])]}},{key:"item.placeName",fn:function(a){var i=a.item;return[t("v-edit-dialog",{attrs:{"return-value":i.placeName},on:{save:function(a){return e.savePlaceName(i.placeName)},cancel:function(e){},open:function(a){return e.beginEditingDomain(i.domainID)},close:function(e){},"update:returnValue":function(a){return e.$set(i,"placeName",a)},"update:return-value":function(a){return e.$set(i,"placeName",a)}},scopedSlots:e._u([{key:"input",fn:function(){return[t("v-text-field",{attrs:{label:"Edit","single-line":"",counter:"",disabled:!e.$store.state.account.useAsAdmin},model:{value:i.placeName,callback:function(a){e.$set(i,"placeName",a)},expression:"item.placeName"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(i.placeName)+" ")])]}}])})},r=[],l=(t("4160"),t("159b"),{name:"DomainList",props:{source:String},data:function(){return{dialog:!1,headers:[{text:"Place Name",align:"start",sortable:!0,value:"placeName"},{text:"Domain ID",value:"domainID"},{text:"Users",value:"users"},{text:"Actions",value:"actions",sortable:!1}],domainDialogShow:!1,domainDialog:{placeName:"",domainID:""},editingDomain:null,domains:[]}},computed:{},watch:{},created:function(){i=this,this.initialize()},methods:{initialize:function(){this.retrieveDomainList(this.$store.state.metaverseConfig.server)},retrieveDomainList:function(e){window.$.ajax({type:"GET",url:e+"api/v1/domains",contentType:"application/json",data:{asAdmin:i.$store.state.account.useAsAdmin}}).done((function(e){i.domains=[],e.data.domains.forEach((function(e,a){i.domains.push({placeName:e.place_name,domainID:e.domainId,users:e.total_users})}))})).fail((function(e){console.info("Failed to retrieve domain list: ",e)}))},rowClicked:function(e){this.domainDialogShow=!0,this.domainDialog.placeName=e.placeName,this.domainDialog.domainID=e.domainID,this.domainDialog.users=e.users},beginEditingDomain:function(e){this.editingDomain=e},savePlaceName:function(e){this.postUpdateDomain(this.editingDomain,{place_name:e})},deleteDomain:function(e,a){confirm("Are you sure you want to delete "+a+"?")&&this.postDeleteDomain(e)},postUpdateDomain:function(e,a){var t=window.$.param({asAdmin:i.$store.state.account.useAsAdmin});t="?"+t,window.$.ajax({type:"POST",url:i.$store.state.metaverseConfig.server+"api/v1/domains/"+e+t,contentType:"application/json",data:{domain:{dataToUpdate:a}}}).done((function(a){console.info("Successfully updated domain:",e),i.retrieveDomainList(i.$store.state.metaverseConfig.server)})).fail((function(a){console.info("Failed to update domain:",e),i.retrieveDomainList(i.$store.state.metaverseConfig.server)}))},postDeleteDomain:function(e){var a=window.$.param({asAdmin:i.$store.state.account.useAsAdmin});a="?"+a,window.$.ajax({type:"DELETE",url:i.$store.state.metaverseConfig.server+"api/v1/domains/"+e+a}).done((function(a){console.info("Successfully deleted domain:",e),i.retrieveDomainList(i.$store.state.metaverseConfig.server)})).fail((function(a){console.info("Failed to delete domain:",e),i.retrieveDomainList(i.$store.state.metaverseConfig.server)}))}}}),c=l,m=t("2877"),d=t("6544"),u=t.n(d),v=t("8212"),p=t("b0af"),f=t("99d9"),D=t("8fea"),g=t("169a"),h=t("ce7e"),w=t("7679"),b=t("132d"),V=t("8860"),$=t("da13"),x=t("5d23"),y=t("2fa4"),C=t("8654"),N=t("71d9"),_=t("2a7f"),A=Object(m["a"])(c,s,r,!1,null,null,null),k=A.exports;u()(A,{VAvatar:v["a"],VCard:p["a"],VCardText:f["b"],VCardTitle:f["c"],VDataTable:D["a"],VDialog:g["a"],VDivider:h["a"],VEditDialog:w["a"],VIcon:b["a"],VList:V["a"],VListItem:$["a"],VListItemSubtitle:x["b"],VListItemTitle:x["c"],VSpacer:y["a"],VTextField:C["a"],VToolbar:N["a"],VToolbarTitle:_["a"]});var I={name:"Domain",props:{source:String},components:{DomainList:k}},L=I,S=t("7496"),T=t("a523"),E=t("f6c4"),j=t("0fd9"),F=Object(m["a"])(L,n,o,!1,null,null,null);a["default"]=F.exports;u()(F,{VApp:S["a"],VContainer:T["a"],VMain:E["a"],VRow:j["a"]})}}]);
//# sourceMappingURL=chunk-2d213afc.7b047fcb.js.map