(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b46e"],{bea6:function(t,e,a){"use strict";a.r(e);var s,i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-main",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("PeopleList")],1)],1)],1)],1)},o=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.people,"sort-by":"user"},on:{"click:row":t.rowClicked},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("People")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-toolbar-title",[t._v("Users")]),a("v-spacer"),a("v-dialog",{attrs:{width:"500",color:"primary"},model:{value:t.userDialogShow,callback:function(e){t.userDialogShow=e},expression:"userDialogShow"}},[a("v-card",[a("v-card-title",[t._v(" "+t._s(t.userDialog.username)+" ")]),a("v-card-text",{staticClass:"text-left"},[a("v-list",{staticClass:"transparent"},[a("v-list-item",[a("v-list-item-title",[t._v(" Account ID ")]),a("v-list-item-subtitle",{staticClass:"text-right"},[t._v(" "+t._s(t.userDialog.accountId)+" ")])],1),a("v-list-item",[a("v-list-item-title",[t._v(" Status ")]),a("v-list-item-subtitle",{staticClass:"text-right"},[t._v(" "+t._s(t.userDialog.status)+" ")])],1)],1),a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",[t._v("Location")]),a("v-expansion-panel-content",[a("v-list",{staticClass:"transparent"},[a("v-list-item",[a("v-list-item-title",[t._v(" Session ID ")]),a("v-list-item-subtitle",{staticClass:"text-right"},[t._v(" "+t._s(t.userDialog.location_node_id)+" ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var s=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:"",color:"red",disabled:!t.canEditUser},on:{click:function(e){return e.stopPropagation(),t.deleteUser(s.accountId,s.username)}}},"v-icon",n,!1),i),[t._v(" mdi-delete-alert ")])]}}],null,!0)},[a("span",[t._v("Delete User")])])]}},{key:"item.images",fn:function(t){var e=t.item;return[a("v-avatar",[a("img",{attrs:{src:e.images.thumbnail}})])]}}])})},c=[],l=(a("4160"),a("159b"),{name:"PeopleList",props:{source:String},data:function(){return{dialog:!1,headers:[{text:"Username",align:"start",sortable:!0,value:"username"},{text:"Account ID",value:"accountId"},{text:"Status",value:"status"},{text:"Actions",value:"actions",sortable:!1}],userDialogShow:!1,userDialog:{username:"",accountId:"",status:"",location_node_id:""},editingUser:null,people:[]}},computed:{},watch:{},created:function(){s=this,i=this.$store.state,this.$store.state.metaverseConfig.server,this.initialize()},methods:{initialize:function(){this.retrieveAccountList(this.$store.state.metaverseConfig.server)},rowClicked:function(t){this.userDialogShow=!0,this.userDialog.username=t.username,this.userDialog.accountId=t.accountId,this.userDialog.status=t.status,this.userDialog.location_node_id=t.locationData.node_id},canEditUser:function(){return i.account.useAsAdmin},beginEditingUsername:function(t){this.editingUser=t},saveUsername:function(t){this.postUpdateAccount(this.editingUser,{username:t})},deleteUser:function(t,e){confirm("Are you sure you want to delete "+e+"?")&&this.postDeleteAccount(t)},retrieveAccountList:function(t){var e=window.$.param({asAdmin:s.$store.state.account.useAsAdmin});e="?"+e,window.$.ajax({type:"GET",url:t+"/api/v1/users"+e}).done((function(t){s.people=[],t.data.users.forEach((function(t,e){var a=t.location.online?"Online":"Offline";s.people.push({username:t.username,status:a,locationData:t.location,accountId:t.accountId})}))})).fail((function(t){console.info("Failed to retrieve account list: ",t)}))},postUpdateAccount:function(t,e){var a={accounts:{dataToUpdate:e}},i=window.$.param({asAdmin:s.$store.state.account.useAsAdmin});i="?"+i,window.$.ajax({type:"POST",url:s.$store.state.metaverseConfig.server+"/api/v1/account/"+t+i,contentType:"application/json",data:JSON.stringify(a)}).done((function(e){console.info("Successfully updated account:",t),s.retrieveAccountList(s.$store.state.metaverseConfig.server)})).fail((function(e){console.info("Failed to update account:",t),s.retrieveAccountList(s.$store.state.metaverseConfig.server)}))},postDeleteAccount:function(t){var e=window.$.param({asAdmin:s.$store.state.account.useAsAdmin});e="?"+e,window.$.ajax({type:"DELETE",url:s.$store.state.metaverseConfig.server+"/api/v1/account/"+t+e}).done((function(e){console.info("Successfully deleted account:",t),s.retrieveAccountList(s.$store.state.metaverseConfig.server)})).fail((function(e){console.info("Failed to delete account:",t),s.retrieveAccountList(s.$store.state.metaverseConfig.server)}))}}}),u=l,d=a("2877"),v=a("6544"),p=a.n(v),f=a("8212"),m=a("b0af"),g=a("99d9"),h=a("8fea"),w=a("169a"),_=a("ce7e"),b=a("cd55"),A=a("49e2"),x=a("c865"),D=a("0393"),C=a("132d"),V=a("8860"),$=a("da13"),S=a("5d23"),y=a("2fa4"),I=a("71d9"),L=a("2a7f"),U=a("3a2f"),E=Object(d["a"])(u,r,c,!1,null,null,null),T=E.exports;p()(E,{VAvatar:f["a"],VCard:m["a"],VCardText:g["b"],VCardTitle:g["c"],VDataTable:h["a"],VDialog:w["a"],VDivider:_["a"],VExpansionPanel:b["a"],VExpansionPanelContent:A["a"],VExpansionPanelHeader:x["a"],VExpansionPanels:D["a"],VIcon:C["a"],VList:V["a"],VListItem:$["a"],VListItemSubtitle:S["b"],VListItemTitle:S["c"],VSpacer:y["a"],VToolbar:I["a"],VToolbarTitle:L["a"],VTooltip:U["a"]});var k={name:"People",props:{source:String},components:{PeopleList:T}},P=k,j=a("7496"),O=a("a523"),F=a("f6c4"),J=a("0fd9"),z=Object(d["a"])(P,n,o,!1,null,null,null);e["default"]=z.exports;p()(z,{VApp:j["a"],VContainer:O["a"],VMain:F["a"],VRow:J["a"]})}}]);
//# sourceMappingURL=chunk-2d21b46e.cb20356d.js.map