(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d213afc"],{ae79:function(t,e,i){"use strict";i.r(e);var a,n,o,s,l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",{attrs:{id:"inspire"}},[i("v-main",[i("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[i("v-row",{attrs:{align:"center",justify:"center"}},[i("DomainList")],1)],1)],1)],1)},r=[],c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.domains,"sort-by":"user"},on:{"click:row":t.rowClicked},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:""}},[i("v-toolbar-title",[t._v("Domains")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-spacer"),i("v-dialog",{attrs:{width:"500",color:"primary"},model:{value:t.domainDialogShow,callback:function(e){t.domainDialogShow=e},expression:"domainDialogShow"}},[i("v-card",[i("v-card-title",[t._v(" "+t._s(t.domainDialog.placeName)+" ")]),i("v-card-text",{staticClass:"text-left"},[i("v-list",{staticClass:"transparent"},[i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[t._v(" Place Name ")]),i("v-list-item-subtitle",[t._v(" "+t._s(t.domainDialog.placeName)+" ")])],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[t._v(" Users ")]),i("v-list-item-subtitle",[t._v(" "+t._s(t.domainDialog.users)+" ")])],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[t._v(" Ice Server ")]),i("v-list-item-subtitle",[t._v(" "+t._s(t.domainDialog.iceServer)+" ")])],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[t._v(" Domain ID ")]),i("v-list-item-subtitle",[t._v(" "+t._s(t.domainDialog.domainID)+" ")])],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[t._v(" Owner Account ID ")]),i("v-list-item-subtitle",[t._v(" "+t._s(t.domainDialog.sponsorAccountId)+" ")])],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[t._v(" Protocol ")]),i("v-list-item-subtitle",[t._v(" "+t._s(t.domainDialog.protocol)+" ")])],1)],1),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",[t._v(" Version ")]),i("v-list-item-subtitle",[t._v(" "+t._s(t.domainDialog.version)+" ")])],1)],1),i("v-list-item",[i("v-expansion-panels",[i("v-expansion-panel",[i("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:t._u([{key:"actions",fn:function(){return[i("v-icon",{attrs:{color:"primary"}},[t._v("mdi-information-variant")])]},proxy:!0}])},[t._v(" Public Key ")]),i("v-expansion-panel-content",[t._v(" "+t._s(t.domainDialog.publicKey)+" ")])],1)],1)],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[i("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[i("v-icon",t._g(t._b({attrs:{small:"",color:"red",disabled:!t.canEditDomain(a.sponsorAccountId)},on:{click:function(e){return e.stopPropagation(),t.deleteDomain(a.domainID,a.placeName)}}},"v-icon",o,!1),n),[t._v(" mdi-delete-alert ")])]}}],null,!0)},[i("span",[t._v("Delete Domain")])])]}},{key:"item.images",fn:function(t){var e=t.item;return[i("v-avatar",[i("img",{attrs:{src:e.images.thumbnail}})])]}},{key:"item.placeName",fn:function(e){var a=e.item;return[i("v-edit-dialog",{attrs:{"return-value":a.placeName},on:{save:function(e){return t.savePlaceName(a.placeName)},cancel:function(t){},open:function(e){return t.beginEditingDomain(a.domainID)},close:function(t){},"update:returnValue":function(e){return t.$set(a,"placeName",e)},"update:return-value":function(e){return t.$set(a,"placeName",e)}},scopedSlots:t._u([{key:"input",fn:function(){return[i("v-text-field",{attrs:{label:"Edit","single-line":"",counter:"",disabled:!t.$store.state.account.useAsAdmin},model:{value:a.placeName,callback:function(e){t.$set(a,"placeName",e)},expression:"item.placeName"}})]},proxy:!0}],null,!0)},[t._v(" "+t._s(a.placeName)+" ")])]}}])})},m=[],d=(i("4160"),i("b0c0"),i("159b"),i("ade3")),u=(i("8552"),a={name:"DomainList",props:{source:String},data:function(){return{dialog:!1,headers:[{text:"Place Name",align:"start",sortable:!0,value:"placeName"},{text:"Protocol",value:"protocol"},{text:"Version",value:"version"},{text:"Users",value:"users"},{text:"Actions",value:"actions",sortable:!1}],domainDialogShow:!1,domainDialog:{placeName:"",users:"",domainID:"",version:"",protocol:"",publicKey:"",iceServer:"",sponsorAccountId:"",networkingMode:""},editingDomain:null,domains:[]}},computed:{},watch:{},created:function(){n=this,o=this.$store.state,s=o.metaverseConfig.server,this.initialize()}},Object(d["a"])(a,"computed",{}),Object(d["a"])(a,"methods",{initialize:function(){this.retrieveDomainList(s)},retrieveDomainList:function(t){var e=window.$.param({asAdmin:o.account.useAsAdmin});e="?"+e,window.$.ajax({type:"GET",url:t+"/api/v1/domains"+e,contentType:"application/json"}).done((function(t){n.domains=[],t.data.domains.forEach((function(t,e){n.domains.push({placeName:t.name,domainID:t.domainId,users:t.total_users,protocol:t.protocol_version,publicKey:t.public_key,version:t.version,iceServer:t.ice_server_address,sponsorAccountId:t.sponsor_accountid,networkingMode:t.networking_mode})}))})).fail((function(t){console.info("Failed to retrieve domain list: ",t)}))},rowClicked:function(t){this.domainDialogShow=!0,this.domainDialog.placeName=t.placeName,this.domainDialog.domainID=t.domainID,this.domainDialog.version=t.version,this.domainDialog.protocol=t.protocol,this.domainDialog.publicKey=t.publicKey,this.domainDialog.iceServer=t.iceServer,this.domainDialog.sponsorAccountId=t.sponsorAccountId,this.domainDialog.networkingMode=t.networkingMode,this.domainDialog.users=t.users},canEditDomain:function(t){return o.account.useAsAdmin||o.account.accountId===t},beginEditingDomain:function(t){this.editingDomain=t},savePlaceName:function(t){this.postUpdateDomain(this.editingDomain,{place_name:t})},deleteDomain:function(t,e){confirm("Are you sure you want to delete "+e+"?")&&this.postDeleteDomain(t)},postUpdateDomain:function(t,e){var i=window.$.param({asAdmin:o.account.useAsAdmin});i="?"+i,window.$.ajax({type:"POST",url:s+"api/v1/domains/"+t+i,contentType:"application/json",data:{domain:{dataToUpdate:e}}}).done((function(e){console.info("Successfully updated domain:",t),n.retrieveDomainList(s)})).fail((function(e){console.info("Failed to update domain:",t),n.retrieveDomainList(s)}))},postDeleteDomain:function(t){var e=window.$.param({asAdmin:o.account.useAsAdmin});e="?"+e,window.$.ajax({type:"DELETE",url:s+"api/v1/domains/"+t+e}).done((function(e){console.info("Successfully deleted domain:",t),n.retrieveDomainList(s)})).fail((function(e){console.info("Failed to delete domain:",t),n.retrieveDomainList(s)}))}}),a),v=u,p=i("2877"),f=i("6544"),D=i.n(f),g=i("8212"),_=i("b0af"),b=i("99d9"),h=i("8fea"),w=i("169a"),y=i("ce7e"),V=i("7679"),x=i("cd55"),A=i("49e2"),I=i("c865"),k=i("0393"),S=i("132d"),N=i("8860"),E=i("da13"),L=i("5d23"),T=i("2fa4"),C=i("8654"),P=i("71d9"),$=i("2a7f"),j=i("3a2f"),K=Object(p["a"])(v,c,m,!1,null,null,null),O=K.exports;D()(K,{VAvatar:g["a"],VCard:_["a"],VCardText:b["b"],VCardTitle:b["c"],VDataTable:h["a"],VDialog:w["a"],VDivider:y["a"],VEditDialog:V["a"],VExpansionPanel:x["a"],VExpansionPanelContent:A["a"],VExpansionPanelHeader:I["a"],VExpansionPanels:k["a"],VIcon:S["a"],VList:N["a"],VListItem:E["a"],VListItemContent:L["a"],VListItemSubtitle:L["b"],VListItemTitle:L["c"],VSpacer:T["a"],VTextField:C["a"],VToolbar:P["a"],VToolbarTitle:$["a"],VTooltip:j["a"]});var M={name:"Domain",props:{source:String},components:{DomainList:O}},U=M,F=i("7496"),z=i("a523"),J=i("f6c4"),G=i("0fd9"),H=Object(p["a"])(U,l,r,!1,null,null,null);e["default"]=H.exports;D()(H,{VApp:F["a"],VContainer:z["a"],VMain:J["a"],VRow:G["a"]})}}]);
//# sourceMappingURL=chunk-2d213afc.4188d3fb.js.map