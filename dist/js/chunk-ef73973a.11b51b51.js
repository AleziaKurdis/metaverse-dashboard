(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef73973a"],{"4bd4":function(t,e,a){"use strict";a("4de4"),a("7db0"),a("4160"),a("caad"),a("07ac"),a("2532"),a("159b");var i=a("5530"),s=a("58df"),o=a("7e2b"),n=a("3206");e["a"]=Object(s["a"])(o["a"],Object(n["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,a=function(t){return t.$watch("hasError",(function(a){e.$set(e.errorBag,t._uid,a)}),{immediate:!0})},i={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",(function(s){s&&(e.errorBag.hasOwnProperty(t._uid)||(i.valid=a(t)))})):i.valid=a(t),i},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var a=this.watchers.find((function(t){return t._uid===e._uid}));a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(i["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},bea6:function(t,e,a){"use strict";a.r(e);var i,s,o,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-main",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("PeopleList")],1)],1)],1)],1)},r=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.people,loading:t.peopleDataTableLoading,search:t.search,"sort-by":"user"},on:{"click:row":t.rowClicked},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("People")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-toolbar-title",[t._v("Users")]),a("v-spacer"),a("v-text-field",{staticClass:"mt-7",attrs:{solo:"",label:"Search",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("v-dialog",{attrs:{width:"500",color:"primary"},model:{value:t.userDialogShow,callback:function(e){t.userDialogShow=e},expression:"userDialogShow"}},[a("v-card",[a("v-img",{staticClass:"userDialogHero",attrs:{height:"80px",src:t.userDialog.hero}},[a("v-card-title",[a("v-avatar",{directives:[{name:"show",rawName:"v-show",value:t.userDialog.thumbnail,expression:"userDialog.thumbnail"}],staticClass:"mr-5"},[a("img",{attrs:{src:t.userDialog.thumbnail}})]),t._v(" "+t._s(t.userDialog.username)+" "),a("v-spacer"),a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary",small:"",fab:"",disabled:!t.canEditUser(t.userDialog.accountID)},on:{click:t.toggleUserEditMode}},"v-btn",s,!1),i),[a("v-icon",{domProps:{textContent:t._s(t.userEditMode?"mdi-image-text":"mdi-account-edit")}})],1)]}}])},[a("span",{domProps:{textContent:t._s(t.userEditMode?"View":"Edit")}})])],1)],1),a("v-scroll-x-transition",{attrs:{"hide-on-leave":!0}},[a("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!t.userEditMode,expression:"!userEditMode"}],staticClass:"text-left"},[a("v-list",{staticClass:"transparent"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Account ID ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.userDialog.accountID)+" ")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Status ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.userDialog.status)+" ")])],1)],1)],1),a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",[t._v("Location")]),a("v-expansion-panel-content",[a("v-list",{staticClass:"transparent"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Session ID ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.userDialog.location_node_id)+" ")])],1)],1)],1)],1)],1)],1)],1)],1),a("v-scroll-x-reverse-transition",{attrs:{"hide-on-leave":!0}},[a("v-card-text",{directives:[{name:"show",rawName:"v-show",value:t.userEditMode,expression:"userEditMode"}],staticClass:"text-left"},[a("v-form",{ref:"editUserPassword",on:{submit:function(e){return e.preventDefault(),t.postUpdateAccount(t.userDialog.accountID,"password",t.editUser.password)}}},[a("v-text-field",{attrs:{label:"Password",name:"editUser.password","prepend-icon":"mdi-rename-box","append-icon":"mdi-content-save-outline",type:"password",rules:t.editUser.passwordRules,loading:t.editUser.passwordLoading,color:"input"},on:{"click:append":function(e){return t.postUpdateAccount(t.userDialog.accountID,"password",t.editUser.password)}},model:{value:t.editUser.password,callback:function(e){t.$set(t.editUser,"password",e)},expression:"editUser.password"}})],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,o=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:"",color:"red",disabled:!t.canEditUser},on:{click:function(e){return e.stopPropagation(),t.deleteUser(i.accountID,i.username)}}},"v-icon",o,!1),s),[t._v(" mdi-delete-alert ")])]}}],null,!0)},[a("span",[t._v("Delete User")])])]}},{key:"item.thumbnail",fn:function(t){var e=t.item;return[a("v-avatar",[a("img",{directives:[{name:"show",rawName:"v-show",value:e.thumbnail,expression:"item.thumbnail"}],attrs:{src:e.thumbnail}})])]}}])})},u=[],c=(a("4160"),a("159b"),a("8552")),d={name:"PeopleList",props:{source:String},data:function(){return{dialog:!1,headers:[{text:"Thumbnail",value:"thumbnail"},{text:"Username",align:"start",sortable:!0,value:"username"},{text:"Account ID",value:"accountID"},{text:"Status",value:"status"},{text:"Actions",value:"actions",sortable:!1}],search:null,peopleDataTableLoading:!1,userDialogShow:!1,userDialog:{thumbnail:"",hero:"",username:"",accountID:"",status:"",location_node_id:""},userEditMode:!1,editUser:{password:"",passwordRules:[function(t){return!!t||"A password is required."}],passwordLoading:!1},editingUser:null,people:[]}},computed:{},watch:{},created:function(){i=this,s=this.$store.state,o=this.$store.state.metaverseConfig.server,this.initialize()},methods:{sendEvent:function(t,e){c["a"].$emit(t,e)},initialize:function(){this.retrieveAccountList(this.$store.state.metaverseConfig.server)},rowClicked:function(t){this.userEditMode=!1,this.userDialogShow=!0,this.userDialog.thumbnail=t.thumbnail,this.userDialog.hero=t.hero,this.userDialog.username=t.username,this.userDialog.accountID=t.accountID,this.userDialog.status=t.status,this.userDialog.location_node_id=t.locationData.node_id},canEditUser:function(){return s.account.useAsAdmin},toggleUserEditMode:function(){this.userEditMode=!this.userEditMode,!0===this.placeEditMode&&this.$refs.editUserPassword.reset()},beginEditingUsername:function(t){this.editingUser=t},deleteUser:function(t,e){confirm("Are you sure you want to delete "+e+"?")&&this.postDeleteAccount(t)},retrieveAccountList:function(t){var e=window.$.param({asAdmin:i.$store.state.account.useAsAdmin});e="?"+e,this.peopleDataTableLoading=!0,window.$.ajax({type:"GET",url:t+"/api/v1/users"+e}).done((function(t){i.peopleDataTableLoading=!1,i.people=[],t.data.users.forEach((function(t,e){var a=t.location.online?"Online":"Offline";i.people.push({username:t.username,status:a,locationData:t.location,accountID:t.accountId,thumbnail:t.images.thumbnail?t.images.thumbnail:"",hero:t.images.hero?t.images.hero:"../assets/1920_bar.png"})}))})).fail((function(t){i.peopleDataTableLoading=!1,console.info("Failed to retrieve people list: ",t),i.$store.commit("mutate",{property:"error",with:{title:"Failed to retrieve people list.",code:"2",full:t.responseJSON.error}}),i.sendEvent("open-dialog",{which:"ErrorOccurred",shouldShow:!0})}))},postUpdateAccount:function(t,e,a){var n=window.$.param({asAdmin:s.account.useAsAdmin});n="?"+n;var r={set:a};this.editUser[e+"Loading"]=!0,window.$.ajax({type:"POST",url:o+"/api/v1/account/"+t+"/field/"+e+n,contentType:"application/json",data:JSON.stringify(r)}).done((function(a){console.info("Successfully updated account:",t),i.editUser[e+"Loading"]=!1,!0===i.userEditMode&&i.toggleUserEditMode(),i.retrieveAccountList(i.$store.state.metaverseConfig.server)})).fail((function(a){console.info("Failed to update account:",t),i.editUser[e+"Loading"]=!1,!0===i.userEditMode&&i.toggleUserEditMode(),i.retrieveAccountList(i.$store.state.metaverseConfig.server)}))},postDeleteAccount:function(t){var e=window.$.param({asAdmin:i.$store.state.account.useAsAdmin});e="?"+e,window.$.ajax({type:"DELETE",url:i.$store.state.metaverseConfig.server+"/api/v1/account/"+t+e}).done((function(e){console.info("Successfully deleted account:",t),i.retrieveAccountList(i.$store.state.metaverseConfig.server)})).fail((function(e){console.info("Failed to delete account:",t),i.retrieveAccountList(i.$store.state.metaverseConfig.server)}))}}},p=d,v=a("2877"),h=a("6544"),m=a.n(h),f=a("8212"),g=a("8336"),w=a("b0af"),b=a("99d9"),D=a("8fea"),_=a("169a"),x=a("ce7e"),E=a("cd55"),V=a("49e2"),U=a("c865"),A=a("0393"),$=a("4bd4"),C=a("132d"),y=a("adda"),L=a("8860"),S=a("da13"),I=a("5d23"),T=a("0789"),M=a("2fa4"),k=a("8654"),P=a("71d9"),B=a("2a7f"),O=a("3a2f"),j=Object(v["a"])(p,l,u,!1,null,null,null),F=j.exports;m()(j,{VAvatar:f["a"],VBtn:g["a"],VCard:w["a"],VCardText:b["b"],VCardTitle:b["c"],VDataTable:D["a"],VDialog:_["a"],VDivider:x["a"],VExpansionPanel:E["a"],VExpansionPanelContent:V["a"],VExpansionPanelHeader:U["a"],VExpansionPanels:A["a"],VForm:$["a"],VIcon:C["a"],VImg:y["a"],VList:L["a"],VListItem:S["a"],VListItemContent:I["a"],VListItemSubtitle:I["b"],VListItemTitle:I["c"],VScrollXReverseTransition:T["e"],VScrollXTransition:T["f"],VSpacer:M["a"],VTextField:k["a"],VToolbar:P["a"],VToolbarTitle:B["a"],VTooltip:O["a"]});var N={name:"People",props:{source:String},components:{PeopleList:F}},z=N,J=a("7496"),R=a("a523"),H=a("f6c4"),X=a("0fd9"),q=Object(v["a"])(z,n,r,!1,null,null,null);e["default"]=q.exports;m()(q,{VApp:J["a"],VContainer:R["a"],VMain:H["a"],VRow:X["a"]})}}]);
//# sourceMappingURL=chunk-ef73973a.11b51b51.js.map