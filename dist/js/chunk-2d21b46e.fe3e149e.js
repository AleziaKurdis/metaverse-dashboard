(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b46e"],{bea6:function(t,e,a){"use strict";a.r(e);var n,s,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-main",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("PeopleList")],1)],1)],1)],1)},o=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.people,"sort-by":"user"},on:{"click:row":t.rowClicked},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("People")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-toolbar-title",[t._v("Users")]),a("v-spacer"),a("v-dialog",{attrs:{width:"500",color:"primary"},model:{value:t.userDialogShow,callback:function(e){t.userDialogShow=e},expression:"userDialogShow"}},[a("v-card",[a("v-card-title",[t._v(" "+t._s(t.userDialog.username)+" ")]),a("v-card-text",{staticClass:"text-left"},[a("v-list",{staticClass:"transparent"},[a("v-list-item",[a("v-list-item-title",[t._v(" Account ID ")]),a("v-list-item-subtitle",{staticClass:"text-right"},[t._v(" "+t._s(t.userDialog.accountId)+" ")])],1),a("v-list-item",[a("v-list-item-title",[t._v(" Status ")]),a("v-list-item-subtitle",{staticClass:"text-right"},[t._v(" "+t._s(t.userDialog.status)+" ")])],1)],1),a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",[t._v("Location")]),a("v-expansion-panel-content",[a("v-list",{staticClass:"transparent"},[a("v-list-item",[a("v-list-item-title",[t._v(" Session ID ")]),a("v-list-item-subtitle",{staticClass:"text-right"},[t._v(" "+t._s(t.userDialog.location_node_id)+" ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,i=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:"",color:"red",disabled:!t.canEditUser},on:{click:function(e){return e.stopPropagation(),t.deleteUser(n.accountId,n.username)}}},"v-icon",i,!1),s),[t._v(" mdi-delete-alert ")])]}}],null,!0)},[a("span",[t._v("Delete User")])])]}},{key:"item.images",fn:function(t){var e=t.item;return[a("v-avatar",[a("img",{attrs:{src:e.images.thumbnail}})])]}},{key:"item.username",fn:function(e){var n=e.item;return[a("v-edit-dialog",{attrs:{"return-value":n.username},on:{save:function(e){return t.saveUsername(n.username)},cancel:function(t){},open:function(e){return t.beginEditingUsername(n.accountId)},close:function(t){},"update:returnValue":function(e){return t.$set(n,"username",e)},"update:return-value":function(e){return t.$set(n,"username",e)}},scopedSlots:t._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:"Edit","single-line":"",counter:"",disabled:!t.$store.state.account.useAsAdmin},model:{value:n.username,callback:function(e){t.$set(n,"username",e)},expression:"item.username"}})]},proxy:!0}],null,!0)},[t._v(" "+t._s(n.username)+" ")])]}}])})},c=[],l=(a("4160"),a("159b"),{name:"PeopleList",props:{source:String},data:function(){return{dialog:!1,headers:[{text:"Username",align:"start",sortable:!0,value:"username"},{text:"Account ID",value:"accountId"},{text:"Status",value:"status"},{text:"Actions",value:"actions",sortable:!1}],userDialogShow:!1,userDialog:{username:"",accountId:"",status:"",location_node_id:""},editingUser:null,people:[]}},computed:{},watch:{},created:function(){n=this,s=this.$store.state,this.$store.state.metaverseConfig.server,this.initialize()},methods:{initialize:function(){this.retrieveAccountList(this.$store.state.metaverseConfig.server)},rowClicked:function(t){this.userDialogShow=!0,this.userDialog.username=t.username,this.userDialog.accountId=t.accountId,this.userDialog.status=t.status,this.userDialog.location_node_id=t.locationData.node_id},canEditUser:function(){return s.account.useAsAdmin},beginEditingUsername:function(t){this.editingUser=t},saveUsername:function(t){this.postUpdateAccount(this.editingUser,{username:t})},deleteUser:function(t,e){confirm("Are you sure you want to delete "+e+"?")&&this.postDeleteAccount(t)},retrieveAccountList:function(t){var e=window.$.param({asAdmin:n.$store.state.account.useAsAdmin});e="?"+e,window.$.ajax({type:"GET",url:t+"/api/v1/users"+e}).done((function(t){n.people=[],t.data.users.forEach((function(t,e){var a=t.location.online?"Online":"Offline";n.people.push({username:t.username,status:a,locationData:t.location,accountId:t.accountId})}))})).fail((function(t){console.info("Failed to retrieve account list: ",t)}))},postUpdateAccount:function(t,e){var a={accounts:{dataToUpdate:e}},s=window.$.param({asAdmin:n.$store.state.account.useAsAdmin});s="?"+s,window.$.ajax({type:"POST",url:n.$store.state.metaverseConfig.server+"/api/v1/account/"+t+s,contentType:"application/json",data:JSON.stringify(a)}).done((function(e){console.info("Successfully updated account:",t),n.retrieveAccountList(n.$store.state.metaverseConfig.server)})).fail((function(e){console.info("Failed to update account:",t),n.retrieveAccountList(n.$store.state.metaverseConfig.server)}))},postDeleteAccount:function(t){var e=window.$.param({asAdmin:n.$store.state.account.useAsAdmin});e="?"+e,window.$.ajax({type:"DELETE",url:n.$store.state.metaverseConfig.server+"/api/v1/account/"+t+e}).done((function(e){console.info("Successfully deleted account:",t),n.retrieveAccountList(n.$store.state.metaverseConfig.server)})).fail((function(e){console.info("Failed to delete account:",t),n.retrieveAccountList(n.$store.state.metaverseConfig.server)}))}}}),u=l,d=a("2877"),v=a("6544"),p=a.n(v),f=a("8212"),m=a("b0af"),g=a("99d9"),h=a("8fea"),_=a("169a"),b=a("ce7e"),w=a("7679"),x=a("cd55"),A=a("49e2"),D=a("c865"),V=a("0393"),C=a("132d"),$=a("8860"),y=a("da13"),S=a("5d23"),E=a("2fa4"),U=a("8654"),I=a("71d9"),k=a("2a7f"),L=a("3a2f"),T=Object(d["a"])(u,r,c,!1,null,null,null),P=T.exports;p()(T,{VAvatar:f["a"],VCard:m["a"],VCardText:g["b"],VCardTitle:g["c"],VDataTable:h["a"],VDialog:_["a"],VDivider:b["a"],VEditDialog:w["a"],VExpansionPanel:x["a"],VExpansionPanelContent:A["a"],VExpansionPanelHeader:D["a"],VExpansionPanels:V["a"],VIcon:C["a"],VList:$["a"],VListItem:y["a"],VListItemSubtitle:S["b"],VListItemTitle:S["c"],VSpacer:E["a"],VTextField:U["a"],VToolbar:I["a"],VToolbarTitle:k["a"],VTooltip:L["a"]});var j={name:"People",props:{source:String},components:{PeopleList:P}},O=j,F=a("7496"),J=a("a523"),z=a("f6c4"),G=a("0fd9"),H=Object(d["a"])(O,i,o,!1,null,null,null);e["default"]=H.exports;p()(H,{VApp:F["a"],VContainer:J["a"],VMain:z["a"],VRow:G["a"]})}}]);
//# sourceMappingURL=chunk-2d21b46e.fe3e149e.js.map