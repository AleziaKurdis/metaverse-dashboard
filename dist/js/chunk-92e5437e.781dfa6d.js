(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-92e5437e"],{1681:function(t,e,a){},"2db4":function(t,e,a){"use strict";a("caad"),a("a9e3");var i=a("ade3"),n=(a("ca71"),a("8dd9")),s=a("a9ad"),o=a("7560"),l=a("f2e7"),c=a("fe6c"),r=a("58df"),d=a("80d2"),u=a("d9bd");e["a"]=Object(r["a"])(n["a"],s["a"],l["a"],Object(c["b"])(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:function(t){return"string"===typeof t||!1===t}},vertical:Boolean},data:function(){return{activeTimeout:-1}},computed:{classes:function(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground:function(){return!this.text&&!this.outlined},isDark:function(){return this.hasBackground?!this.light:o["a"].options.computed.isDark.call(this)},styles:function(){if(this.absolute)return{};var t=this.$vuetify.application,e=t.bar,a=t.bottom,i=t.footer,n=t.insetFooter,s=t.left,o=t.right,l=t.top;return{paddingBottom:Object(d["g"])(a+i+n),paddingLeft:this.app?Object(d["g"])(s):void 0,paddingRight:this.app?Object(d["g"])(o):void 0,paddingTop:Object(d["g"])(e+l)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted:function(){this.isActive&&this.setTimeout()},created:function(){this.$attrs.hasOwnProperty("auto-height")&&Object(u["e"])("auto-height",this),0==this.timeout&&Object(u["d"])('timeout="0"',"-1",this)},methods:{genActions:function(){return this.$createElement("div",{staticClass:"v-snack__action "},[Object(d["r"])(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent:function(){return this.$createElement("div",{staticClass:"v-snack__content",class:Object(i["a"])({},this.contentClass,!0),attrs:{role:"status","aria-live":"polite"}},[Object(d["r"])(this)])},genWrapper:function(){var t=this.hasBackground?this.setBackgroundColor:this.setTextColor,e=t(this.color,{staticClass:"v-snack__wrapper",class:n["a"].options.computed.classes.call(this),directives:[{name:"show",value:this.isActive}]});return this.$createElement("div",e,[this.genContent(),this.genActions()])},genTransition:function(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout:function(){var t=this;window.clearTimeout(this.activeTimeout);var e=Number(this.timeout);this.isActive&&![0,-1].includes(e)&&(this.activeTimeout=window.setTimeout((function(){t.isActive=!1}),e))}},render:function(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},"4bd4":function(t,e,a){"use strict";a("4de4"),a("7db0"),a("4160"),a("caad"),a("07ac"),a("2532"),a("159b");var i=a("5530"),n=a("58df"),s=a("7e2b"),o=a("3206");e["a"]=Object(n["a"])(s["a"],Object(o["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(t){var e=this,a=function(t){return t.$watch("hasError",(function(a){e.$set(e.errorBag,t._uid,a)}),{immediate:!0})},i={_uid:t._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",(function(n){n&&(e.errorBag.hasOwnProperty(t._uid)||(i.valid=a(t)))})):i.valid=a(t),i},validate:function(){return 0===this.inputs.filter((function(t){return!t.validate(!0)})).length},reset:function(){this.inputs.forEach((function(t){return t.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(t){return t.resetValidation()})),this.resetErrorBag()},register:function(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister:function(t){var e=this.inputs.find((function(e){return e._uid===t._uid}));if(e){var a=this.watchers.find((function(t){return t._uid===e._uid}));a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter((function(t){return t._uid!==e._uid})),this.inputs=this.inputs.filter((function(t){return t._uid!==e._uid})),this.$delete(this.errorBag,e._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object(i["a"])({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},a844:function(t,e,a){"use strict";a("a9e3");var i=a("5530"),n=(a("1681"),a("8654")),s=a("58df"),o=Object(s["a"])(n["a"]);e["a"]=o.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(i["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},n["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"}},genInput:function(){var t=n["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){n["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},ca71:function(t,e,a){},d377:function(t,e,a){"use strict";a.r(e);var i,n,s,o,l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-main",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("PlacesList")],1)],1)],1)],1)},c=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.places,"sort-by":"domain"},on:{"click:row":t.rowClicked},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Places")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary",small:"",fab:""},on:{click:function(e){t.addPlaceDialogShow=!0}}},"v-btn",n,!1),i),[a("v-icon",[t._v(" mdi-map-marker-plus ")])],1)]}}])},[a("span",[t._v("Create Place")])]),a("v-dialog",{attrs:{width:"500",color:"primary"},model:{value:t.placeDialogShow,callback:function(e){t.placeDialogShow=e},expression:"placeDialogShow"}},[a("v-card",[a("v-card-title",[t._v(" "+t._s(t.placeDialog.placeName)+" ")]),a("v-card-text",{staticClass:"text-left"},[a("v-list",{staticClass:"transparent"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Place Name ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.placeDialog.placeName)+" ")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Description ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.placeDialog.description)+" ")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Users ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.placeDialog.domainUsers)+" ")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Address ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.placeDialog.address)+" ")])],1)],1),a("v-list-item",[a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:t._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"primary"}},[t._v("mdi-information-variant")])]},proxy:!0}])},[t._v(" Domain ")]),a("v-expansion-panel-content",[a("v-list",[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Domain ID ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.placeDialog.domainID)+" ")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Domain Name ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.placeDialog.domainName)+" ")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Domain Network Address ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.placeDialog.domainNetworkAddress)+" ")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Domain Ice Server ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.placeDialog.domainID)+" ")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Domain Last Checked In ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.placeDialog.domainLastSeen)+" ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{width:"500",color:"primary"},model:{value:t.addPlaceDialogShow,callback:function(e){t.addPlaceDialogShow=e},expression:"addPlaceDialogShow"}},[a("v-card",[a("v-card-title",[t._v(" Add Place ")]),a("v-card-text",[a("v-form",{ref:"addPlaceForm"},[a("v-text-field",{attrs:{label:"Place Name",name:"placeName","prepend-icon":"mdi-rename-box",type:"text",rules:t.addPlaceDialog.nameRules,color:"input"},model:{value:t.addPlaceDialog.name,callback:function(e){t.$set(t.addPlaceDialog,"name",e)},expression:"addPlaceDialog.name"}}),a("v-textarea",{attrs:{label:"Description",name:"description","prepend-icon":"mdi-image-text",type:"text",rules:t.addPlaceDialog.descriptionRules,color:"input"},model:{value:t.addPlaceDialog.description,callback:function(e){t.$set(t.addPlaceDialog,"description",e)},expression:"addPlaceDialog.description"}}),a("v-text-field",{attrs:{label:"Address ( /x,y,z/x,y,z,w )",placeholder:"Location & Orientation",name:"address","prepend-icon":"mdi-compass-outline",type:"text",rules:t.addPlaceDialog.addressRules,color:"input"},model:{value:t.addPlaceDialog.address,callback:function(e){t.$set(t.addPlaceDialog,"address",e)},expression:"addPlaceDialog.address"}}),a("v-text-field",{attrs:{label:"Assign to Domain",placeholder:"Domain ID",name:"domainID","prepend-icon":"mdi-earth",type:"text",rules:t.addPlaceDialog.domainIDRules,color:"input"},model:{value:t.addPlaceDialog.domainID,callback:function(e){t.$set(t.addPlaceDialog,"domainID",e)},expression:"addPlaceDialog.domainID"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.postAddPlace}},[t._v(" Create ")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:"",color:"red",disabled:!t.canEditPlace(i.accountID)},on:{click:function(e){return e.stopPropagation(),t.deletePlace(i.placeID,i.placeName)}}},"v-icon",s,!1),n),[t._v(" mdi-delete-alert ")])]}}],null,!0)},[a("span",[t._v("Delete Place")])])]}},{key:"item.images",fn:function(t){var e=t.item;return[a("v-avatar",[a("img",{attrs:{src:e.images.thumbnail}})])]}}])}),a("v-snackbar",{attrs:{timeout:t.snackbarSuccessTimeout,color:"success"},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"white",text:""},on:{click:function(e){t.snackbarSuccessShow=!1}}},"v-btn",i,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbarSuccessShow,callback:function(e){t.snackbarSuccessShow=e},expression:"snackbarSuccessShow"}},[t._v(" "+t._s(t.snackbarSuccessText)+" ")])],1)},d=[],u=(a("a4d3"),a("e01a"),a("4160"),a("b0c0"),a("159b"),a("ade3")),p=a("8552"),m=(i={name:"PlacesList",props:{source:String},data:function(){return{dialog:!1,headers:[{text:"Place Name",align:"start",sortable:!0,value:"placeName"},{text:"Users",value:"domainUsers"},{text:"Actions",value:"actions",sortable:!1}],placeDialogShow:!1,placeDialog:{placeName:null,placeID:null,address:null,description:null,accountID:null,thumbnail:null,images:null,domainID:null,domainName:null,domainNetworkAddress:null,domainIceServer:null,domainLastSeen:null,domainUsers:null},addPlaceDialogShow:!1,addPlaceDialog:{name:null,nameRules:[function(t){return!!t||"A place name is required."}],description:null,descriptionRules:[function(t){return!!t||"A description is required."}],address:null,addressRules:[function(t){return!!t||"An address is required."}],domainID:null,domainIDRules:[function(t){return!!t||"A domain to assign this place to is required."}]},editingPlace:null,places:[],snackbarSuccessShow:!1,snackbarSuccessText:"Success.",snackbarSuccessTimeout:6e3}},computed:{},watch:{},created:function(){n=this,s=this.$store.state,o=s.metaverseConfig.server,this.initialize()}},Object(u["a"])(i,"computed",{}),Object(u["a"])(i,"methods",{sendEvent:function(t,e){p["a"].$emit(t,e)},initialize:function(){this.retrievePlacesList(o)},rowClicked:function(t){this.placeDialogShow=!0,this.placeDialog.placeName=t.placeName,this.placeDialog.placeID=t.placeID,this.placeDialog.address=t.address,this.placeDialog.description=t.description,this.placeDialog.accountID=t.accountID,this.placeDialog.thumbanil=t.thumbanil,this.placeDialog.images=t.images,this.placeDialog.domainID=t.domainID,this.placeDialog.domainName=t.domainName,this.placeDialog.domainNetworkAddress=t.domainNetworkAddress,this.placeDialog.domainIceServer=t.domainIceServer,this.placeDialog.domainLastSeen=t.domainLastSeen,this.placeDialog.domainUsers=t.domainUsers},canEditPlace:function(t){return s.account.useAsAdmin||s.account.accountId===t},beginEditingPlace:function(t){this.editingPlace=t},savePlaceName:function(t){this.postUpdatePlace(this.editingPlace,"name",{set:t})},deletePlace:function(t,e){confirm("Are you sure you want to delete "+e+"?")&&this.postDeletePlace(t)},retrievePlacesList:function(t){var e=window.$.param({asAdmin:s.account.useAsAdmin});e="?"+e,window.$.ajax({type:"GET",url:t+"/api/v1/places"+e,contentType:"application/json"}).done((function(t){n.places=[],t.data.places.forEach((function(t,e){n.places.push({placeName:t.name,placeID:t.placeId,address:t.address,description:t.description,accountID:t.accountId,thumbnail:t.thumbanil,images:t.images,domainID:t.domain.id,domainName:t.domain.name,domainNetworkAddress:t.domain.network_address,domainIceServer:t.domain.ice_server_address,domainLastSeen:t.domain.time_of_last_heartbeat,domainUsers:t.domain.num_users})}))})).fail((function(t){console.info("Failed to retrieve places list: ",t),n.$store.commit("mutate",{property:"error",with:{title:"Failed to retrieve places list.",code:"2",full:t.responseJSON.error}}),n.sendEvent("open-dialog",{which:"ErrorOccurred",shouldShow:!0})}))},postAddPlace:function(){if(this.$refs.addPlaceForm.validate()){this.addPlaceDialogShow=!1;var t={place:{name:n.addPlaceDialog.name,description:n.addPlaceDialog.description,address:n.addPlaceDialog.address,domainId:n.addPlaceDialog.domainID}},e=window.$.param({asAdmin:s.account.useAsAdmin});e="?"+e,window.$.ajax({type:"POST",url:o+"/api/v1/user/places"+e,contentType:"application/json",data:JSON.stringify(t)}).done((function(t){console.info("Add place successful."),n.snackbarSuccessText="Successfully created place.",n.snackbarSuccessShow=!0,n.$refs.addPlaceForm.reset(),n.retrievePlacesList(o)})).fail((function(t){console.info("Failed to add place:",t),n.$store.commit("mutate",{property:"error",with:{title:"Failed to add place "+n.addPlaceDialog.name,code:"3",full:t.responseJSON.error}}),n.sendEvent("open-dialog",{which:"ErrorOccurred",shouldShow:!0}),n.retrievePlacesList(o)}))}},postUpdatePlace:function(t,e,a){var i=window.$.param({asAdmin:s.account.useAsAdmin});i="?"+i,window.$.ajax({type:"POST",url:o+"/api/v1/places/"+t+"/field/"+e+i,contentType:"application/json",data:{dataToUpdate:a}}).done((function(e){console.info("Successfully updated place:",t),n.snackbarSuccessText="Successfully updated place.",n.snackbarSuccessShow=!0,n.retrievePlacesList(o)})).fail((function(e){console.info("Failed to update place:",t),n.$store.commit("mutate",{property:"error",with:{title:"Failed to update place:"+t,code:"3",full:e.responseJSON.error}}),n.sendEvent("open-dialog",{which:"ErrorOccurred",shouldShow:!0}),n.retrievePlacesList(o)}))},postDeletePlace:function(t){var e=window.$.param({asAdmin:s.account.useAsAdmin});e="?"+e,window.$.ajax({type:"DELETE",url:o+"/api/v1/user/places/"+t+e}).done((function(e){console.info("Successfully deleted place:",t),n.snackbarSuccessText="Successfully deleted place.",n.snackbarSuccessShow=!0,n.retrievePlacesList(o)})).fail((function(e){console.info("Failed to delete place:",t),n.$store.commit("mutate",{property:"error",with:{title:"Failed to delete place:"+t,code:"3",full:e.responseJSON.error}}),n.sendEvent("open-dialog",{which:"ErrorOccurred",shouldShow:!0}),n.retrievePlacesList(o)}))}}),i),h=m,v=a("2877"),f=a("6544"),g=a.n(f),b=a("8212"),w=a("8336"),D=a("b0af"),_=a("99d9"),k=a("8fea"),S=a("169a"),P=a("ce7e"),x=a("cd55"),y=a("49e2"),I=a("c865"),A=a("0393"),T=a("4bd4"),V=a("132d"),$=a("8860"),N=a("da13"),O=a("5d23"),E=a("2db4"),C=a("2fa4"),j=a("8654"),B=a("a844"),L=a("71d9"),F=a("2a7f"),R=a("3a2f"),z=Object(v["a"])(h,r,d,!1,null,null,null),H=z.exports;g()(z,{VAvatar:b["a"],VBtn:w["a"],VCard:D["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:_["c"],VDataTable:k["a"],VDialog:S["a"],VDivider:P["a"],VExpansionPanel:x["a"],VExpansionPanelContent:y["a"],VExpansionPanelHeader:I["a"],VExpansionPanels:A["a"],VForm:T["a"],VIcon:V["a"],VList:$["a"],VListItem:N["a"],VListItemContent:O["a"],VListItemSubtitle:O["b"],VListItemTitle:O["c"],VSnackbar:E["a"],VSpacer:C["a"],VTextField:j["a"],VTextarea:B["a"],VToolbar:L["a"],VToolbarTitle:F["a"],VTooltip:R["a"]});var U={name:"Places",props:{source:String},components:{PlacesList:H}},G=U,J=a("7496"),q=a("a523"),W=a("f6c4"),M=a("0fd9"),K=Object(v["a"])(G,l,c,!1,null,null,null);e["default"]=K.exports;g()(K,{VApp:J["a"],VContainer:q["a"],VMain:W["a"],VRow:M["a"]})}}]);
//# sourceMappingURL=chunk-92e5437e.781dfa6d.js.map