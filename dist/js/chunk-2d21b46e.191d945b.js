(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b46e"],{bea6:function(e,t,a){"use strict";a.r(t);var n,s,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-main",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("PeopleList")],1)],1)],1)],1)},o=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.people,"sort-by":"user"},on:{"click:row":e.rowClicked},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("People")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-toolbar-title",[e._v("Users")]),a("v-spacer"),a("v-dialog",{attrs:{width:"500",color:"primary"},model:{value:e.userDialogShow,callback:function(t){e.userDialogShow=t},expression:"userDialogShow"}},[a("v-card",[a("v-card-title",[e._v(" "+e._s(e.userDialog.username)+" ")]),a("v-card-text",{staticClass:"text-left"},[a("v-list",{staticClass:"transparent"},[a("v-list-item",[a("v-list-item-title",[e._v(" Account ID ")]),a("v-list-item-subtitle",{staticClass:"text-right"},[e._v(" "+e._s(e.userDialog.accountId)+" ")])],1),a("v-list-item",[a("v-list-item-title",[e._v(" Status ")]),a("v-list-item-subtitle",{staticClass:"text-right"},[e._v(" "+e._s(e.userDialog.status)+" ")])],1)],1),a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",[e._v("Location")]),a("v-expansion-panel-content",[a("v-list",{staticClass:"transparent"},[a("v-list-item",[a("v-list-item-title",[e._v(" Session ID ")]),a("v-list-item-subtitle",{staticClass:"text-right"},[e._v(" "+e._s(e.userDialog.location_node_id)+" ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{attrs:{small:"",disabled:!e.canEditUser},on:{click:function(t){return t.stopPropagation(),e.deleteUser(n.accountId,n.username)}}},[e._v(" mdi-nuke ")])]}},{key:"item.images",fn:function(e){var t=e.item;return[a("v-avatar",[a("img",{attrs:{src:t.images.thumbnail}})])]}},{key:"item.username",fn:function(t){var n=t.item;return[a("v-edit-dialog",{attrs:{"return-value":n.username},on:{save:function(t){return e.saveUsername(n.username)},cancel:function(e){},open:function(t){return e.beginEditingUsername(n.accountId)},close:function(e){},"update:returnValue":function(t){return e.$set(n,"username",t)},"update:return-value":function(t){return e.$set(n,"username",t)}},scopedSlots:e._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{label:"Edit","single-line":"",counter:"",disabled:!e.$store.state.account.useAsAdmin},model:{value:n.username,callback:function(t){e.$set(n,"username",t)},expression:"item.username"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(n.username)+" ")])]}}])})},c=[],u=(a("4160"),a("159b"),{name:"PeopleList",props:{source:String},data:function(){return{dialog:!1,headers:[{text:"Username",align:"start",sortable:!0,value:"username"},{text:"Account ID",value:"accountId"},{text:"Status",value:"status"},{text:"Actions",value:"actions",sortable:!1}],userDialogShow:!1,userDialog:{username:"",accountId:"",status:"",location_node_id:""},editingUser:null,people:[]}},computed:{},watch:{},created:function(){n=this,s=this.$store.state,this.$store.state.metaverseConfig.server,this.initialize()},methods:{initialize:function(){this.retrieveAccountList(this.$store.state.metaverseConfig.server)},rowClicked:function(e){this.userDialogShow=!0,this.userDialog.username=e.username,this.userDialog.accountId=e.accountId,this.userDialog.status=e.status,this.userDialog.location_node_id=e.locationData.node_id},canEditUser:function(){return s.account.useAsAdmin},beginEditingUsername:function(e){this.editingUser=e},saveUsername:function(e){this.postUpdateAccount(this.editingUser,{username:e})},deleteUser:function(e,t){confirm("Are you sure you want to delete "+t+"?")&&this.postDeleteAccount(e)},retrieveAccountList:function(e){var t=window.$.param({asAdmin:n.$store.state.account.useAsAdmin});t="?"+t,window.$.ajax({type:"GET",url:e+"/api/v1/users"+t}).done((function(e){n.people=[],e.data.users.forEach((function(e,t){var a=e.location.online?"Online":"Offline";n.people.push({username:e.username,status:a,locationData:e.location,accountId:e.accountId})}))})).fail((function(e){console.info("Failed to retrieve account list: ",e)}))},postUpdateAccount:function(e,t){var a={accounts:{dataToUpdate:t}},s=window.$.param({asAdmin:n.$store.state.account.useAsAdmin});s="?"+s,window.$.ajax({type:"POST",url:n.$store.state.metaverseConfig.server+"/api/v1/account/"+e+s,contentType:"application/json",data:JSON.stringify(a)}).done((function(t){console.info("Successfully updated account:",e),n.retrieveAccountList(n.$store.state.metaverseConfig.server)})).fail((function(t){console.info("Failed to update account:",e),n.retrieveAccountList(n.$store.state.metaverseConfig.server)}))},postDeleteAccount:function(e){var t=window.$.param({asAdmin:n.$store.state.account.useAsAdmin});t="?"+t,window.$.ajax({type:"DELETE",url:n.$store.state.metaverseConfig.server+"/api/v1/account/"+e+t}).done((function(t){console.info("Successfully deleted account:",e),n.retrieveAccountList(n.$store.state.metaverseConfig.server)})).fail((function(t){console.info("Failed to delete account:",e),n.retrieveAccountList(n.$store.state.metaverseConfig.server)}))}}}),l=u,d=a("2877"),v=a("6544"),p=a.n(v),m=a("8212"),f=a("b0af"),g=a("99d9"),h=a("8fea"),b=a("169a"),w=a("ce7e"),x=a("7679"),_=a("cd55"),A=a("49e2"),D=a("c865"),V=a("0393"),C=a("132d"),$=a("8860"),y=a("da13"),S=a("5d23"),E=a("2fa4"),I=a("8654"),U=a("71d9"),k=a("2a7f"),L=Object(d["a"])(l,r,c,!1,null,null,null),T=L.exports;p()(L,{VAvatar:m["a"],VCard:f["a"],VCardText:g["b"],VCardTitle:g["c"],VDataTable:h["a"],VDialog:b["a"],VDivider:w["a"],VEditDialog:x["a"],VExpansionPanel:_["a"],VExpansionPanelContent:A["a"],VExpansionPanelHeader:D["a"],VExpansionPanels:V["a"],VIcon:C["a"],VList:$["a"],VListItem:y["a"],VListItemSubtitle:S["b"],VListItemTitle:S["c"],VSpacer:E["a"],VTextField:I["a"],VToolbar:U["a"],VToolbarTitle:k["a"]});var P={name:"People",props:{source:String},components:{PeopleList:T}},j=P,O=a("7496"),F=a("a523"),J=a("f6c4"),z=a("0fd9"),G=Object(d["a"])(j,i,o,!1,null,null,null);t["default"]=G.exports;p()(G,{VApp:O["a"],VContainer:F["a"],VMain:J["a"],VRow:z["a"]})}}]);
//# sourceMappingURL=chunk-2d21b46e.191d945b.js.map