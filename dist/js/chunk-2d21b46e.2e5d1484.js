(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b46e"],{bea6:function(t,e,a){"use strict";a.r(e);var i,n,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("v-main",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("PeopleList")],1)],1)],1)],1)},o=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.people,"sort-by":"user"},on:{"click:row":t.rowClicked},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("People")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-toolbar-title",[t._v("Users")]),a("v-spacer"),a("v-dialog",{attrs:{width:"500",color:"primary"},model:{value:t.userDialogShow,callback:function(e){t.userDialogShow=e},expression:"userDialogShow"}},[a("v-card",[a("v-card-title",[a("v-avatar",{directives:[{name:"show",rawName:"v-show",value:t.userDialog.thumbnail,expression:"userDialog.thumbnail"}],staticClass:"mr-5"},[a("img",{attrs:{src:t.userDialog.thumbnail}})]),t._v(" "+t._s(t.userDialog.username)+" ")],1),a("v-card-text",{staticClass:"text-left"},[a("v-list",{staticClass:"transparent"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Account ID ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.userDialog.accountId)+" ")])],1)],1),a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Status ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.userDialog.status)+" ")])],1)],1)],1),a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",[t._v("Location")]),a("v-expansion-panel-content",[a("v-list",{staticClass:"transparent"},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v(" Session ID ")]),a("v-list-item-subtitle",[t._v(" "+t._s(t.userDialog.location_node_id)+" ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,s=e.attrs;return[a("v-icon",t._g(t._b({attrs:{small:"",color:"red",disabled:!t.canEditUser},on:{click:function(e){return e.stopPropagation(),t.deleteUser(i.accountId,i.username)}}},"v-icon",s,!1),n),[t._v(" mdi-delete-alert ")])]}}],null,!0)},[a("span",[t._v("Delete User")])])]}},{key:"item.thumbnail",fn:function(t){var e=t.item;return[a("v-avatar",[a("img",{directives:[{name:"show",rawName:"v-show",value:e.thumbnail,expression:"item.thumbnail"}],attrs:{src:e.thumbnail}})])]}}])})},l=[],c=(a("4160"),a("159b"),{name:"PeopleList",props:{source:String},data:function(){return{dialog:!1,headers:[{text:"Thumbnail",value:"thumbnail"},{text:"Username",align:"start",sortable:!0,value:"username"},{text:"Account ID",value:"accountId"},{text:"Status",value:"status"},{text:"Actions",value:"actions",sortable:!1}],userDialogShow:!1,userDialog:{thumbnail:"",username:"",accountId:"",status:"",location_node_id:""},editingUser:null,people:[]}},computed:{},watch:{},created:function(){i=this,n=this.$store.state,this.$store.state.metaverseConfig.server,this.initialize()},methods:{initialize:function(){this.retrieveAccountList(this.$store.state.metaverseConfig.server)},rowClicked:function(t){this.userDialogShow=!0,this.userDialog.thumbnail=t.thumbnail,this.userDialog.username=t.username,this.userDialog.accountId=t.accountId,this.userDialog.status=t.status,this.userDialog.location_node_id=t.locationData.node_id},canEditUser:function(){return n.account.useAsAdmin},beginEditingUsername:function(t){this.editingUser=t},saveUsername:function(t){this.postUpdateAccount(this.editingUser,{username:t})},deleteUser:function(t,e){confirm("Are you sure you want to delete "+e+"?")&&this.postDeleteAccount(t)},retrieveAccountList:function(t){var e=window.$.param({asAdmin:i.$store.state.account.useAsAdmin});e="?"+e,window.$.ajax({type:"GET",url:t+"/api/v1/users"+e}).done((function(t){i.people=[],t.data.users.forEach((function(t,e){var a=t.location.online?"Online":"Offline";i.people.push({username:t.username,status:a,locationData:t.location,accountId:t.accountId,thumbnail:t.images.thumbnail?t.images.thumbnail:""})}))})).fail((function(t){console.info("Failed to retrieve account list: ",t)}))},postUpdateAccount:function(t,e){var a={accounts:{dataToUpdate:e}},n=window.$.param({asAdmin:i.$store.state.account.useAsAdmin});n="?"+n,window.$.ajax({type:"POST",url:i.$store.state.metaverseConfig.server+"/api/v1/account/"+t+n,contentType:"application/json",data:JSON.stringify(a)}).done((function(e){console.info("Successfully updated account:",t),i.retrieveAccountList(i.$store.state.metaverseConfig.server)})).fail((function(e){console.info("Failed to update account:",t),i.retrieveAccountList(i.$store.state.metaverseConfig.server)}))},postDeleteAccount:function(t){var e=window.$.param({asAdmin:i.$store.state.account.useAsAdmin});e="?"+e,window.$.ajax({type:"DELETE",url:i.$store.state.metaverseConfig.server+"/api/v1/account/"+t+e}).done((function(e){console.info("Successfully deleted account:",t),i.retrieveAccountList(i.$store.state.metaverseConfig.server)})).fail((function(e){console.info("Failed to delete account:",t),i.retrieveAccountList(i.$store.state.metaverseConfig.server)}))}}}),u=c,v=a("2877"),d=a("6544"),m=a.n(d),p=a("8212"),f=a("b0af"),h=a("99d9"),g=a("8fea"),b=a("169a"),w=a("ce7e"),_=a("cd55"),D=a("49e2"),A=a("c865"),x=a("0393"),V=a("132d"),C=a("8860"),$=a("da13"),S=a("5d23"),y=a("2fa4"),I=a("71d9"),L=a("2a7f"),U=a("3a2f"),E=Object(v["a"])(u,r,l,!1,null,null,null),T=E.exports;m()(E,{VAvatar:p["a"],VCard:f["a"],VCardText:h["b"],VCardTitle:h["c"],VDataTable:g["a"],VDialog:b["a"],VDivider:w["a"],VExpansionPanel:_["a"],VExpansionPanelContent:D["a"],VExpansionPanelHeader:A["a"],VExpansionPanels:x["a"],VIcon:V["a"],VList:C["a"],VListItem:$["a"],VListItemContent:S["a"],VListItemSubtitle:S["b"],VListItemTitle:S["c"],VSpacer:y["a"],VToolbar:I["a"],VToolbarTitle:L["a"],VTooltip:U["a"]});var k={name:"People",props:{source:String},components:{PeopleList:T}},P=k,j=a("7496"),O=a("a523"),F=a("f6c4"),J=a("0fd9"),N=Object(v["a"])(P,s,o,!1,null,null,null);e["default"]=N.exports;m()(N,{VApp:j["a"],VContainer:O["a"],VMain:F["a"],VRow:J["a"]})}}]);
//# sourceMappingURL=chunk-2d21b46e.2e5d1484.js.map